bundle:
  name: databricks_cicd_bundle
  description: Unified CI/CD Bundle for Dev, UAT, and Prod
  version: 1.0.0

# ===============================================================
# Default file inclusion and exclusion rules
# ===============================================================
files:
  include:
    - Notebooks/**
    - src/**
    - jobs/**
  exclude:
    - .github/**
    - .git/**
    - bundle_config/**
    - tests/**
    - docs/**
    - **/archive/**
    - **/unit_test_results/**
    - **/__pycache__/**
    - **/*.pyc
    - README.md
    - LICENSE
    
# =========================================================
# Global workspace definition
# =========================================================
# workspace:
deployment_paths: &deployment_paths
  root_path: /Workspace/main/databricks_cicd
  file_path: /Workspace/main/databricks_cicd
  artifact_path: /Workspace/main/databricks_cicd/deployment/artifacts
  state_path: /Workspace/main/databricks_cicd/deployment/state

# =========================================================
# Environment-specific configurations
# =========================================================
targets:

  dev:
    mode: production  # Deploy to a shared (non-user) workspace
    workspace:
      <<: *deployment_paths
      host: https://adb-4113378154106092.12.azuredatabricks.net/
    # run_as:
    #   user_name: dev.service@databricks.corp
    variables:
      env_name: dev
      data_catalog: ei_dev_catalog

  # uat:
  #   mode: production
  #   workspace:
  #     <<: *deployment_paths
  #     host: https://adb-3424836342847607.7.azuredatabricks.net/
  #   # run_as:
  #   #   user_name: uat.service@databricks.corp
  #   variables:
  #     env_name: uat
  #     data_catalog: ei_uat_catalog

  prod:
    mode: production
    workspace:
      <<: *deployment_paths
      host: https://adb-3029815957552623.3.azuredatabricks.net/
    # run_as:
    #   user_name: prod.service@databricks.corp
    variables:
      env_name: prod
      data_catalog: ei_prod_catalog

# ===============================================================
# Synchronization exclusions for Databricks CLI
# ===============================================================
sync:
  exclude:
    - .github/**
    - .git/**
    - bundle_config/**
    - tests/**
    - docs/**
    - **/archive/**
    - **/unit_test_results/**
    - **/__pycache__/**
    - **/*.pyc
    - README.md
    - LICENSE
